@page "/Income"
@using PersonalFinanceManager.Client.ViewModels 
@using PersonalFinanceManager.Shared.Models 
@inject HttpClient Http

<h1>Income</h1>

<p>This component demonstrates fetching data from the server.</p>

@if (_incomeViewModel == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <p>Your income is @_incomeViewModel.Amount</p>
}

@code {

    private IncomeViewModel _incomeViewModel;
    protected override async Task OnInitializedAsync()
    {
        IList<IncomeModel> income = await Http.GetFromJsonAsync<IList<IncomeModel>>("Users/1/Incomes");
        _incomeViewModel = income.FirstOrDefault();
    }
}
